.cb1 {
  border: 0.5px solid red;
}
.cb2 {
  border: 0.5px solid green;
}
.cb3 {
  border: 0.5px solid blue;
}
.cb4 {
  border: 0.5px solid purple;
}

////////////////////////////////////////////////////////////
////////////////// Accesibility ////////////////////////////
//////////////////////////////////////////////////////////

.sr-only {
  position: absolute;
  width: rem-calc(1);
  height: rem-calc(1);
  padding: 0;
  margin: rem-calc(-1);
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  border: 0;

}

.sr-only-focusable:active,
.sr-only-focusable:focus {
  position: static;
  width: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  clip: auto;
}

.skiplink {
  background: transparent;
  color: #212121;
  left: 0;
  padding: rem-calc(16 24);
  position: absolute;
  top: -rem-calc(-72);
  transition: all 0.2s ease-in-out;
  z-index: 1040 !important;
  text-decoration: underline !important;
}

.skiplink:focus {
  background: #ffffff;
  left: 0;
  outline: 0;
  position: absolute;
  top: 0;
  transition: all 0.2s ease-in-out;
}

//FOCUS

/* Reset and customize focus styles globally */
// *:focus-visible {
//   outline: rem-calc(2) solid rgb(255, 0, 0);
//   outline-offset: rem-calc(2);
//   transition: outline 0.2s ease;
//   z-index: 1;
// }

/* More specific element-level customizations */
// a:focus-visible {
//   text-decoration: underline;
//   color: #0056b3;
//   z-index: 1;
//   outline: rem-calc(2) solid rgb(0, 123, 255);
// }

// input:focus-visible {
//   border-color: blue;
//   box-shadow: rem-calc(0 0 5) rgba(0, 123, 255, 0.5);
//   z-index: 1;
// }

// button:focus-visible {
//   transform: scale(1.05);
//   background-color: #f8f9fa;
//   z-index: 1;
// }

/* Styles where only focus is supported */
// input:focus,
// button:focus,
// a[href]:focus,
// a:focus {
//   outline: #7fb7ff dotted rem-calc(3);
//   outline-offset: rem-calc(2);
// }

// /* Reset styles where focus-visible is supported (we'll add them back
//  * in the next block)
// */
// input:focus,
// button:focus:not(:focus-visible),
// a[href]:focus:not(:focus-visible),
// a:focus:not(:focus-visible) {
//   outline: none;
// }

// /* The final, focus-visible styles. You could elect to make this even more
//  * obvious, if stakeholders or whomever is pushing against focus styles this
//  * week are now off your back.
// */
// input:focus,
// button:focus-visible,
// a[href]:focus-visible,
// a:focus-visible {
//   outline: #7fb7ff dotted rem-calc(3);
//   outline-offset: rem-calc(2);
// }

/* Global focus styles for entire application */
/* ============================================================================
 * CENTRALIZED FOCUS STYLES
 * These styles provide consistent, accessible focus indicators throughout
 * the application. Following WCAG 2.1 Level AA standards.
 * ============================================================================ */

/* Base focus style for all focusable elements */
*:focus {
  outline: $focus !important;
  outline-offset: $f-style !important;
  box-shadow: none !important;
}

/* Focus-visible support for modern browsers (keyboard navigation only) */
*:focus-visible {
  @include focus-visible-styles;
}

/* Remove focus outline for mouse clicks (focus-visible support) */
*:focus:not(:focus-visible) {
  outline: none !important;
  box-shadow: none !important;
}

/* ============================================================================
 * INTERACTIVE ELEMENTS - Enhanced focus styles
 * ============================================================================ */

/* Links */
a:focus-visible {
  @include focus-visible-styles;
  text-decoration: underline;
}

/* Buttons */
button:focus-visible,
.btn:focus-visible {
  @include focus-visible-styles;
}

/* Form controls */
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  @include focus-visible-styles;
  border-color: var(--bs-primary);
}

/* Custom tabindex elements */
[tabindex]:focus-visible {
  @include focus-visible-styles;
}

/* ============================================================================
 * SPECIFIC COMPONENT OVERRIDES
 * ============================================================================ */

/* Bootstrap dropdowns and navigation */
.dropdown-toggle:focus-visible,
.nav-link:focus-visible,
/* Close buttons (offcanvas, modals, etc.) */
.btn-close:focus-visible,
/* Card and article elements that are focusable */
article:focus-visible,
.card:focus-visible {
  @include focus-visible-styles;
}

/* Bootstrap badges and accessibility control buttons */
/* Using #222222 for better contrast instead of currentColor */
.badge:focus-visible,
.c-a11y-options .card .btn-group button:focus-visible,
.c-a11y-options .card .btn:focus-visible {
  outline: rem-calc(2) dotted #222222 !important;
  outline-offset: rem-calc(2) !important;
  box-shadow: none !important;
  border-radius: rem-calc(2) !important;
}

/* Headings with tabindex="-1" for programmatic focus */
h1[tabindex="-1"]:focus,
h2[tabindex="-1"]:focus,
h3[tabindex="-1"]:focus,
h4[tabindex="-1"]:focus,
h5[tabindex="-1"]:focus,
h6[tabindex="-1"]:focus {
  outline: 3px solid transparent !important; /* Hide outline for programmatic focus */
}

/* ============================================================================
 * HIGH CONTRAST MODE SUPPORT
 * ============================================================================ */
@media (prefers-contrast: high) {
  *:focus-visible {
    outline: $focus-outline-width $focus-outline-style $focus-outline-color !important;
    outline-offset: $focus-outline-offset !important;
    box-shadow: none !important;
  }
  
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  [tabindex]:focus-visible {
    outline: $focus-outline-width $focus-outline-style $focus-outline-color !important;
    outline-offset: $focus-outline-offset !important;
    border: 2px solid currentColor !important;
  }
}

/* ============================================================================
 * REDUCED MOTION SUPPORT
 * ============================================================================ */
@media (prefers-reduced-motion: reduce) {
  *:focus-visible {
    transition: none !important;
  }
}

////////////////////////////////////////////////////////////
////////////////// GENERAL CLASES /////////////////////////
//////////////////////////////////////////////////////////

// Base HTML and Body styles
// Note: html font-size is set to 100% in _tools.scss to respect
// user's browser/device font size preferences for accessibility.
// All other sizes use rem units which scale proportionally.
html,
body {
  font-family: 'Open Sans', sans-serif !important;
  margin-top: rem-calc(40);
  margin-bottom: rem-calc(48);
  padding: 0;
  background-image: url('../../assets/img/patterns/pattern_012.png');
  background-attachment: fixed;
}

/* ============================================================================
 * WCAG 1.4.10 REFLOW - Level AA (Added in 2.1)
 * Content must be presentable without horizontal scrolling at 320px width
 * (equivalent to 1280px at 400% zoom)
 * ============================================================================ */

/* Ensure base font size respects user settings */
html {
  /* Set to 100% to respect user's browser/device font preferences */
  font-size: 100%;
  
  /* Prevent browsers from overriding user's zoom preferences */
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Prevent horizontal overflow on main containers */
/* Balanced to prevent horizontal scrolling while allowing Bootstrap dropdowns */
html {
  /* Prevent horizontal scrolling at the root level */
  overflow-x: hidden;
  max-width: 100%;
}

body {
  max-width: 100%;
  /* Allow dropdowns to overflow - scrolling prevented at html level */
  overflow-x: visible;
  position: relative;
}

main {
  max-width: 100%;
  position: relative;
}

.container,
.container-fluid {
  max-width: 100%;
  position: relative;
}

/* Allow all content to wrap and reflow naturally */
* {
  box-sizing: border-box;
}

/* Enable text wrapping to prevent horizontal scrolling */
p,
li,
td,
th,
div,
span,
label {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Ensure images don't cause horizontal overflow */
img,
video,
canvas,
svg {
  max-width: 100%;
  height: auto;
}

/* Tables can scroll horizontally (WCAG exception for 2D layout) */
table {
  max-width: 100%;
  overflow-x: auto;
  display: block;
}

/* Allow pre and code to wrap */
pre,
code {
  white-space: pre-wrap;
  word-wrap: break-word;
  max-width: 100%;
  overflow-x: auto;
}

/* Ensure form elements don't break reflow */
input,
select,
textarea,
button {
  max-width: 100%;
}

/* Critical 320px breakpoint - WCAG 1.4.10 requirement */
@media screen and (max-width: 320px) {
  body {
    padding-left: rem-calc(8);
    padding-right: rem-calc(8);
  }
  
  /* Ensure navigation elements stack vertically */
  .navbar-collapse {
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Only affect nav items within collapsed navbar */
  .navbar-collapse .nav,
  .navbar-collapse .nav-item {
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Dropdown menus in mobile collapsed state only */
  .navbar-collapse .dropdown-menu {
    position: static !important;
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Allow button groups to wrap */
  .btn-group {
    flex-wrap: wrap;
  }
  
  /* Ensure cards and modals don't exceed viewport */
  .card,
  .modal-dialog {
    max-width: 100% !important;
    margin-left: auto;
    margin-right: auto;
  }
  
  /* Stack columns vertically */
  .row {
    flex-direction: column;
  }
  
  .col,
  [class*="col-"] {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* Support for 200% zoom (equivalent to 640px viewport) */
@media screen and (max-width: 640px) {
  /* Ensure columns stack at this zoom level */
  .row {
    flex-direction: column;
  }
  
  .col,
  [class*="col-"] {
    width: 100% !important;
    max-width: 100% !important;
    flex: 0 0 100%;
  }
}

/* Fluid typography for better scaling across viewports */
@media screen and (min-width: 320px) {
  body {
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
    line-height: 1.6;
  }
  
  h1 {
    font-size: clamp(1.75rem, 1.5rem + 1vw, 2.5rem);
    line-height: 1.2;
  }
  
  h2 {
    font-size: clamp(1.5rem, 1.3rem + 0.8vw, 2rem);
    line-height: 1.3;
  }
  
  h3 {
    font-size: clamp(1.25rem, 1.15rem + 0.5vw, 1.75rem);
    line-height: 1.4;
  }
  
  h4 {
    font-size: clamp(1.125rem, 1.05rem + 0.4vw, 1.5rem);
    line-height: 1.4;
  }
  
  h5 {
    font-size: clamp(1rem, 0.95rem + 0.25vw, 1.25rem);
    line-height: 1.5;
  }
  
  h6 {
    font-size: clamp(0.875rem, 0.85rem + 0.125vw, 1rem);
    line-height: 1.5;
  }
}

//=======================================
// =========== A11Y ICON ================
//=======================================

.universal-access {
  background-image: url('../../assets/img/universal-access-solid.svg');
  background-repeat: no-repeat;
  background-position: center center;
  display: inline-block;
  background-size: cover;
  // Increased size for better visibility while maintaining accessibility
  width: rem-calc(44);
  height: rem-calc(44);
  filter: invert(23%) sepia(75%) saturate(2991%) hue-rotate(214deg)
    brightness(112%) contrast(99%);
}

.universal-access:hover,
.universal-access:focus {
  filter: invert(19%) sepia(100%) saturate(5226%) hue-rotate(210deg)
    brightness(91%) contrast(92%);
}

/* Ensure universal-access has consistent focus with menu items */
button .universal-access:focus,
.btn .universal-access:focus {
  outline: none !important;
}

button:focus .universal-access,
.btn:focus .universal-access {
  filter: invert(19%) sepia(100%) saturate(5226%) hue-rotate(210deg)
    brightness(91%) contrast(92%);
}

/* Reduce padding for mobile accessibility button */
@include respond-below(lg) {
  .accessibility-btn {
    padding: rem-calc(4) !important;
    margin: rem-calc(2) !important;
  }
}

/* Add active state */
.universal-access:active,
.universal-access.active {
  /* .active class for programmatic activation */
  filter: invert(19%) sepia(100%) saturate(5226%) hue-rotate(210deg)
    brightness(70%) contrast(110%); /* Darkened version for active state */
}

//=======================================
// =========== SKIP CONTENT =============
//=======================================

a.skip-to-content {
  color: transparent;
  font-size: rem-calc(14);
  position: absolute;
  top: rem-calc(5);
  left: rem-calc(-9999);
  z-index: 1031;
  font-weight: 400;
  text-decoration: none;
  padding: rem-calc(8 16);
  border-radius: rem-calc(4);
  white-space: nowrap;

  &:focus {
    color: #000000;
    font-weight: 700;
    background-color: #ffffff;
    outline: $focus !important;
    box-shadow: 0 rem-calc(4) rem-calc(8) rgba(0, 0, 0, 0.2) !important;
    left: rem-calc(10);
    outline-offset: $f-style !important;
  }

   @include respond-below(md) {
     top: rem-calc(4.1);
     
     &:focus {
       left: rem-calc(8);
     }
    }

}

// Main element should not show outline when focused via skip link
main[tabindex="-1"] {
  outline: none;
}

a[disabled],
a[aria-disabled='true'] {
  color: #6c757d;
  cursor: not-allowed;
  text-decoration: none;
  opacity: 0.65;
  pointer-events: none;
}
